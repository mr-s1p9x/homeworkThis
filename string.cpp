#include <iostream>
#include <cstring> // Для работы с функциями строк

//Разработать класс String, который в дальнейшем будет
//использоваться для работы со строками. Класс должен
//содержать:
// Конструктор по умолчанию, позволяющий создать строку длиной 80 символов;
// Конструктор, позволяющий создавать строку произвольного размера;
// Конструктор, который создаёт строку и инициализирует её строкой, полученной от пользователя.
// Необходимо создать деструктор, а также использовать механизмы делегирования конструкторов, если это возможно.
// Класс должен содержать методы для ввода строк с клавиатуры и вывода строк на экран.

using namespace std;

class String {
private:
    char* str; // Указатель на динамический массив символов
    size_t length; // Длина строки

public:
    // Конструктор по умолчанию
    String() : String(80) { // Делегируем вызов другому конструктору
        cout << "Default constructor called, allocated 80 characters" << endl;
    }

    // Конструктор с произвольным размером
    String(size_t len) {
        length = len;
        str = new char[length + 1]; // Выделяем память под строку +1 для нуль-терминатора
        str[0] = '\0'; // Инициализируем строку пустым значением
        cout << "Constructor with size called, allocated " << length << " characters" << endl;
    }

    // Конструктор, который инициализирует строку значением от пользователя
    String(const char* initStr) {
        length = strlen(initStr); // Вычисляем длину строки
        str = new char[length + 1]; // Выделяем память под строку
        strcpy(str, initStr); // Копируем переданную строку в str
        cout << "Constructor with initialization called, initialized with " << initStr << endl;
    }

    // Деструктор
    ~String() {
        delete[] str; // Освобождаем память, выделенную под строку
        cout << "Destructor called, memory freed" << endl;
    }

    // Метод для ввода строки с клавиатуры
    void input() {
        cout << "Enter a string: ";
        cin.getline(str, length); // Считываем строку с клавиатуры
    }

    // Метод для вывода строки на экран
    void output() const {
        cout << "String: " << str << endl; // Выводим строку на экран
    }
};

int main() {
    // Тестирование класса String
    String str1; // Вызов конструктора по умолчанию
    str1.output(); // Вывод пустой строки

    String str2(100); // Вызов конструктора с произвольным размером
    str2.input(); // Ввод строки с клавиатуры
    str2.output(); // Вывод строки на экран

    String str3("Hello, world!"); // Вызов конструктора с инициализацией
    str3.output(); // Вывод инициализированной строки

    return 0;
}
